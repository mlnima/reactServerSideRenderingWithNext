{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, useContext } from 'react';\nimport { AppContext } from \"../context/AppContext\";\nimport AppLayout from \"../components/layouts/AppLayout\";\nimport Widget from \"../components/includes/Widget/Widget\";\nimport Posts from \"../components/includes/Posts/Posts\";\nimport withRouter from \"next/dist/client/with-router\";\nimport { getPosts } from \"../_variables/ajaxPostsVariables\";\nimport Head from \"next/head\";\nimport axios from \"axios\";\nimport { getSetting } from \"../_variables/ajaxVariables\";\n\nvar Home = function Home(props) {\n  var contextData = useContext(AppContext);\n\n  var _useState = useState({\n    title: props.identity.title || '',\n    themeColor: props.identity.themeColor || '',\n    description: props.identity.description || '',\n    keywords: props.identity.keywords || []\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  useEffect(function () {\n    if (props.navigation) {\n      contextData.dispatchNavigationData(props.navigation.data);\n    }\n  }, [props]);\n  return __jsx(AppLayout, null, __jsx(Head, null, __jsx(\"title\", null, state.title), __jsx(\"meta\", {\n    name: \"theme-color\",\n    content: state.themeColor\n  }), __jsx(\"meta\", {\n    name: \"viewport\",\n    content: \"width=device-width, initial-scale=1\"\n  }), __jsx(\"meta\", {\n    charSet: \"utf-8\"\n  }), __jsx(\"link\", {\n    href: \"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\",\n    rel: \"stylesheet\"\n  }), __jsx(\"meta\", {\n    name: \"description\",\n    content: state.description\n  }), __jsx(\"meta\", {\n    name: \"keywords\",\n    content: state.keywords\n  }), __jsx(\"link\", {\n    rel: \"icon\",\n    href: \"/favicon.ico\"\n  })), __jsx(\"div\", {\n    className: \"HomePage\"\n  }, __jsx(\"h1\", null, \"Header 1\"), __jsx(Widget, {\n    component: Posts,\n    posts: props.posts,\n    title: \"latest video\",\n    mainLinkUrl: \"/posts/\",\n    redirectToTitle: \"More videos\",\n    pagination: true,\n    contextData: contextData\n  })));\n};\n\nHome.getInitialProps = function _callee(_ref) {\n  var pathname, query, req, res, err, posts, navigation, identity, data, postsData, identityData, navigationData;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          pathname = _ref.pathname, query = _ref.query, req = _ref.req, res = _ref.res, err = _ref.err;\n          data = {\n            pageNo: query.pageNo ? _parseInt(query.pageNo) : 1,\n            size: 30,\n            totalPosts: 0,\n            postType: 'all',\n            keyword: '',\n            status: 'published',\n            author: 'all',\n            fields: ['title', 'mainThumbnail', 'quality', 'likes', 'disLikes', 'views', 'duration'],\n            checkedPosts: []\n          };\n          _context.prev = 2;\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(getPosts(data));\n\n        case 5:\n          postsData = _context.sent;\n          _context.next = 8;\n          return _regeneratorRuntime.awrap(getSetting('identity'));\n\n        case 8:\n          identityData = _context.sent;\n          _context.next = 11;\n          return _regeneratorRuntime.awrap(getSetting('navigation'));\n\n        case 11:\n          navigationData = _context.sent;\n          posts = postsData.data.posts ? postsData.data.posts : [];\n          identity = identityData.data.setting ? identityData.data.setting.data : {};\n          navigation = navigationData.data.setting ? navigationData.data.setting : {};\n          _context.next = 20;\n          break;\n\n        case 17:\n          _context.prev = 17;\n          _context.t0 = _context[\"catch\"](2);\n          console.error(_context.t0);\n\n        case 20:\n          return _context.abrupt(\"return\", {\n            posts: posts,\n            identity: identity,\n            navigation: navigation\n          });\n\n        case 21:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[2, 17]]);\n};\n\nexport default withRouter(Home);","map":null,"metadata":{},"sourceType":"module"}