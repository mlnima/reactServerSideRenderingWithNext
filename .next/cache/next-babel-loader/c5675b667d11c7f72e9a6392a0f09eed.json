{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useContext, useRef, useEffect } from 'react';\nimport './VideoElement.scss';\nimport withRouter from \"next/dist/client/with-router\";\nimport Link from \"next/link\"; // import {Link} from \"react-router-dom\";\n\nimport { AppContext } from \"../../../context/AppContext\"; // import {withRouter} from \"react-router-dom\";\n// import ProgressBar from \"../ProgressBar/ProgressBar\";\n// import {likeValueCalculator} from \"../../../variables/variables\";\n// import {deletedVideoAutoRemover} from \"../../../variables/ajaxRequestVariables\";\n\nconst VideoElement = props => {\n  let qualityLabel = useRef(null);\n  let durationLabel = useRef(null);\n  let viewLabel = useRef(null);\n  let element = useRef(null);\n  let videoElement = useRef(null);\n  let contextData = useContext(AppContext);\n  let path = '/post/' + props.state.id + '/' + props.state.title;\n  let {\n    0: state,\n    1: setState\n  } = useState({\n    isHover: false,\n    isWatched: false\n  });\n  useEffect(() => {\n    hoverCleaner();\n  }, [state.isHover]);\n  useEffect(() => {\n    if (contextData.state.videoPreviewID !== props.state._id) {\n      setState(_objectSpread({}, state, {\n        isHover: false\n      }));\n    }\n  }, [contextData.state.videoPreviewID]);\n\n  let isHoverHandler = () => {\n    contextData.dispatchState(_objectSpread({}, contextData.data, {\n      videoPreviewID: props.state._id\n    }));\n    state.isHover ? setState(_objectSpread({}, state, {\n      isHover: false\n    })) : setState(_objectSpread({}, state, {\n      isHover: true\n    }));\n  };\n\n  let hoverCleaner = () => {\n    if (state.isHover) {\n      qualityLabel.current.style.visibility = 'hidden';\n      durationLabel.current.style.visibility = 'hidden';\n      viewLabel.current.style.visibility = 'hidden';\n    } else {\n      qualityLabel.current.style.visibility = 'visible';\n      durationLabel.current.style.visibility = 'visible';\n      viewLabel.current.style.visibility = 'visible';\n    }\n  };\n\n  let imageContent = () => {\n    let dataToRender = () => {\n      if (state.isHover && props.state._id === contextData.data.videoPreviewID) {\n        return __jsx(\"video\", {\n          ref: videoElement,\n          src: props.state.videoTrailerUrl,\n          autoPlay: true,\n          loop: true,\n          onMouseOut: e => {\n            isHoverHandler();\n          }\n        });\n      } else if (!state.isHover) {\n        return __jsx(\"img\", {\n          src: props.state.mainThumbnail,\n          alt: props.state.title,\n          onError: err => {\n            // deletedVideoAutoRemover(props.state)\n            console.log(props.state);\n          },\n          onMouseEnter: () => isHoverHandler()\n        });\n      }\n    };\n\n    return dataToRender();\n  };\n\n  let VideoPreviewMobileBtnLogo = () => {\n    let element = __jsx(\"i\", {\n      className: \"fas fa-fast-forward\"\n    });\n\n    if (state.isHover) {\n      element = __jsx(\"i\", {\n        className: \"fas fa-stop\"\n      });\n    } else {\n      element = __jsx(\"i\", {\n        className: \"fas fa-fast-forward\"\n      });\n    }\n\n    return element;\n  };\n\n  return __jsx(\"div\", {\n    ref: element,\n    className: \"videoElementDiv\"\n  }, __jsx(Link, {\n    to: {\n      pathname: path,\n      state: {\n        data: props.state,\n        type: 'video'\n      }\n    }\n  }, __jsx(\"div\", {\n    className: \"VideoElement\",\n    key: props.state.title\n  }, __jsx(\"div\", {\n    className: \"image\"\n  }, __jsx(\"span\", {\n    ref: qualityLabel,\n    className: \"quality\"\n  }, props.state.quality), imageContent(), __jsx(\"span\", {\n    ref: viewLabel,\n    className: \"views\"\n  }, __jsx(\"i\", {\n    className: \"fas fa-eye\"\n  }), props.state.views), __jsx(\"span\", {\n    ref: durationLabel,\n    className: \"duration\"\n  }, props.state.duration)), __jsx(ProgressBar, {\n    value: contextData.functions.likeValueCalculator(props.state.likes, props.state.disLikes)\n  }), __jsx(\"h3\", null, props.state.title))), __jsx(\"button\", {\n    className: \"videoPreviewMobile\",\n    onClick: () => {\n      contextData.dispatchState(_objectSpread({}, contextData.data, {\n        videoPreviewID: props.state._id\n      }));\n      state.isHover ? setState(_objectSpread({}, state, {\n        isHover: false\n      })) : setState(_objectSpread({}, state, {\n        isHover: true\n      }));\n    }\n  }, __jsx(VideoPreviewMobileBtnLogo, null)));\n};\n\nexport default withRouter(VideoElement);","map":{"version":3,"sources":["G:/Dev Project/reactServerSideRenderingWithNext/components/includes/VideoElement/VideoElement.js"],"names":["React","useState","useContext","useRef","useEffect","withRouter","Link","AppContext","VideoElement","props","qualityLabel","durationLabel","viewLabel","element","videoElement","contextData","path","state","id","title","setState","isHover","isWatched","hoverCleaner","videoPreviewID","_id","isHoverHandler","dispatchState","data","current","style","visibility","imageContent","dataToRender","videoTrailerUrl","e","mainThumbnail","err","console","log","VideoPreviewMobileBtnLogo","pathname","type","quality","views","duration","functions","likeValueCalculator","likes","disLikes"],"mappings":"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","sourcesContent":["import React, {useState, useContext, useRef, useEffect} from 'react';\r\nimport './VideoElement.scss';\r\nimport withRouter from \"next/dist/client/with-router\";\r\nimport Link from \"next/link\";\r\n// import {Link} from \"react-router-dom\";\r\nimport {AppContext} from \"../../../context/AppContext\";\r\n// import {withRouter} from \"react-router-dom\";\r\n// import ProgressBar from \"../ProgressBar/ProgressBar\";\r\n// import {likeValueCalculator} from \"../../../variables/variables\";\r\n// import {deletedVideoAutoRemover} from \"../../../variables/ajaxRequestVariables\";\r\n\r\nconst VideoElement = props => {\r\n    let qualityLabel = useRef(null);\r\n    let durationLabel = useRef(null);\r\n    let viewLabel = useRef(null);\r\n    let element = useRef(null)\r\n    let videoElement = useRef(null)\r\n    let contextData = useContext(AppContext);\r\n    let path = '/post/' + props.state.id + '/' + props.state.title;\r\n\r\n    let [state, setState] = useState({\r\n            isHover: false,\r\n            isWatched: false\r\n        })\r\n    ;\r\n\r\n    useEffect(() => {\r\n        hoverCleaner()\r\n    }, [state.isHover]);\r\n\r\n    useEffect(() => {\r\n        if (contextData.state.videoPreviewID !== props.state._id) {\r\n            setState({\r\n                ...state,\r\n                isHover: false\r\n            })\r\n        }\r\n    }, [contextData.state.videoPreviewID]);\r\n\r\n\r\n\r\n    let isHoverHandler = () => {\r\n        contextData.dispatchState({\r\n            ...contextData.data,\r\n            videoPreviewID: props.state._id\r\n        });\r\n        state.isHover ? setState({...state, isHover: false}) : setState({...state, isHover: true})\r\n    };\r\n\r\n    let hoverCleaner = () => {\r\n        if (state.isHover) {\r\n            qualityLabel.current.style.visibility = 'hidden';\r\n            durationLabel.current.style.visibility = 'hidden';\r\n            viewLabel.current.style.visibility = 'hidden';\r\n        } else {\r\n            qualityLabel.current.style.visibility = 'visible';\r\n            durationLabel.current.style.visibility = 'visible';\r\n            viewLabel.current.style.visibility = 'visible';\r\n        }\r\n    };\r\n\r\n\r\n    let imageContent = () => {\r\n        let dataToRender = () => {\r\n            if (state.isHover && props.state._id === contextData.data.videoPreviewID) {\r\n                return (\r\n                    <video ref={videoElement} src={props.state.videoTrailerUrl} autoPlay={true} loop={true}\r\n                           onMouseOut={e => {\r\n\r\n                               isHoverHandler()\r\n\r\n                           }}\r\n                    />)\r\n\r\n            } else if (!state.isHover) {\r\n                return (<img src={props.state.mainThumbnail} alt={props.state.title} onError={err=>{\r\n                    // deletedVideoAutoRemover(props.state)\r\n                    console.log( props.state)\r\n                }} onMouseEnter={() =>\r\n\r\n                    isHoverHandler()\r\n\r\n                }/>)\r\n            }\r\n        };\r\n        return dataToRender()\r\n    };\r\n\r\n\r\n    let VideoPreviewMobileBtnLogo = () => {\r\n        let element = <i className=\"fas fa-fast-forward\"/>\r\n        if (state.isHover) {\r\n            element = <i className=\"fas fa-stop\"/>\r\n        } else {\r\n            element = <i className=\"fas fa-fast-forward\"/>\r\n        }\r\n        return element\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        < div ref={element} className='videoElementDiv'>\r\n            <Link to={{\r\n                pathname: path,\r\n                state: {\r\n                    data: props.state,\r\n                    type: 'video'\r\n                }\r\n            }}>\r\n                <div className='VideoElement' key={props.state.title}>\r\n                    <div className=\"image\">\r\n                        <span ref={qualityLabel} className='quality'>{props.state.quality}</span>\r\n                        {imageContent()}\r\n                        <span ref={viewLabel} className='views'><i className=\"fas fa-eye\"/>{props.state.views}</span>\r\n                        <span ref={durationLabel} className='duration'>{props.state.duration}</span>\r\n\r\n                    </div>\r\n                    <ProgressBar value={contextData.functions.likeValueCalculator(props.state.likes, props.state.disLikes)}/>\r\n                    <h3>{props.state.title}</h3>\r\n                </div>\r\n            </Link>\r\n            <button className='videoPreviewMobile' onClick={() => {\r\n                contextData.dispatchState({\r\n                    ...contextData.data,\r\n                    videoPreviewID: props.state._id\r\n                });\r\n                state.isHover ? setState({...state, isHover: false}) : setState({...state, isHover: true})\r\n            }}>\r\n                <VideoPreviewMobileBtnLogo/>\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default withRouter(VideoElement);"]},"metadata":{},"sourceType":"module"}