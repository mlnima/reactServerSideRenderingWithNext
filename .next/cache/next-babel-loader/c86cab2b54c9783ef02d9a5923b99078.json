{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext, useRef, useEffect } from 'react';\nimport withRouter from \"next/dist/client/with-router\";\nimport Link from \"next/link\"; // import {Link} from \"react-router-dom\";\n\nimport { AppContext } from \"../../../context/AppContext\"; // import {withRouter} from \"react-router-dom\";\n\nimport ProgressBar from \"../ProgressBar/ProgressBar\";\nimport FA from 'react-fontawesome';\nimport { likeValueCalculator } from '../../../_variables/_variables'; // import {deletedVideoAutoRemover} from \"../../../variables/ajaxRequestVariables\";\n\nvar VideoElement = function VideoElement(props) {\n  var qualityLabel = useRef(null);\n  var durationLabel = useRef(null);\n  var viewLabel = useRef(null);\n  var element = useRef(null);\n  var videoElement = useRef(null);\n  var contextData = useContext(AppContext);\n  var path = '/post/' + props.state._id + '/' + props.state.title;\n\n  var _useState = useState({\n    isHover: false,\n    isWatched: false,\n    extraClassName: ''\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  useEffect(function () {\n    if (props.viewType) {\n      setState(_objectSpread({}, state, {\n        extraClassName: props.viewType\n      }));\n    }\n  }, [props]);\n  useEffect(function () {\n    hoverCleaner();\n  }, [state.isHover]);\n  useEffect(function () {\n    if (contextData.state.videoPreviewID !== props.state._id) {\n      setState(_objectSpread({}, state, {\n        isHover: false\n      }));\n    }\n  }, [contextData.state.videoPreviewID]);\n\n  var isHoverHandler = function isHoverHandler() {\n    if (props.state.videoTrailerUrl) {\n      state.isHover ? setState(_objectSpread({}, state, {\n        isHover: false\n      })) : setState(_objectSpread({}, state, {\n        isHover: true\n      }));\n    }\n  };\n\n  var hoverCleaner = function hoverCleaner() {\n    if (props.state.videoTrailerUrl) {\n      if (state.isHover) {\n        qualityLabel.current.style.visibility = 'hidden';\n        durationLabel.current.style.visibility = 'hidden';\n        viewLabel.current.style.visibility = 'hidden';\n      } else {\n        qualityLabel.current.style.visibility = 'visible';\n        durationLabel.current.style.visibility = 'visible';\n        viewLabel.current.style.visibility = 'visible';\n      }\n    }\n  };\n\n  var ImageContent = function ImageContent() {\n    var dataToRender = function dataToRender() {\n      if (state.isHover && props.state.videoTrailerUrl) {\n        return __jsx(\"video\", {\n          ref: videoElement,\n          src: props.state.videoTrailerUrl,\n          autoPlay: true,\n          loop: true,\n          onMouseOut: function onMouseOut(e) {\n            isHoverHandler();\n          }\n        });\n      } else if (!state.isHover) {\n        return __jsx(\"img\", {\n          src: props.state.mainThumbnail,\n          alt: props.state.title,\n          onError: function onError(err) {\n            // deletedVideoAutoRemover(props.state)\n            console.log(props.state);\n          },\n          onMouseEnter: function onMouseEnter() {\n            return isHoverHandler();\n          }\n        });\n      }\n    };\n\n    return dataToRender();\n  };\n\n  return __jsx(\"div\", {\n    ref: element,\n    className: 'videoElementDiv ' + (props.viewType ? props.viewType : 'standard')\n  }, __jsx(Link, {\n    as: \"/\".concat(props.state.title),\n    href: {\n      pathname: '/post',\n      query: {\n        postTitle: props.state.title\n      }\n    }\n  }, __jsx(\"a\", null, __jsx(\"div\", {\n    className: \"VideoElement\",\n    key: props.state.title\n  }, __jsx(\"div\", {\n    className: \"image\"\n  }, __jsx(ImageContent, null), __jsx(\"span\", {\n    ref: qualityLabel,\n    className: \"quality\"\n  }, props.state.quality), __jsx(\"span\", {\n    ref: viewLabel,\n    className: \"views\"\n  }, __jsx(FA, {\n    className: \"fontawesomeSmall\",\n    name: \"eye\"\n  }), props.state.views), __jsx(\"span\", {\n    ref: durationLabel,\n    className: \"duration\"\n  }, props.state.duration)), __jsx(ProgressBar, {\n    value: likeValueCalculator(props.state.likes, props.state.disLikes),\n    percent: true\n  }), __jsx(\"h3\", null, props.state.title)))));\n};\n\nexport default withRouter(VideoElement);","map":{"version":3,"sources":["G:/Dev Project/reactServerSideRenderingWithNext/components/includes/VideoElement/VideoElement.js"],"names":["React","useState","useContext","useRef","useEffect","withRouter","Link","AppContext","ProgressBar","FA","likeValueCalculator","VideoElement","props","qualityLabel","durationLabel","viewLabel","element","videoElement","contextData","path","state","_id","title","isHover","isWatched","extraClassName","setState","viewType","hoverCleaner","videoPreviewID","isHoverHandler","videoTrailerUrl","current","style","visibility","ImageContent","dataToRender","e","mainThumbnail","err","console","log","pathname","query","postTitle","quality","views","duration","likes","disLikes"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useRef, useEffect } from 'react';\r\n\r\nimport withRouter from \"next/dist/client/with-router\";\r\nimport Link from \"next/link\";\r\n// import {Link} from \"react-router-dom\";\r\nimport { AppContext } from \"../../../context/AppContext\";\r\n// import {withRouter} from \"react-router-dom\";\r\nimport ProgressBar from \"../ProgressBar/ProgressBar\";\r\nimport FA from 'react-fontawesome'\r\nimport { likeValueCalculator } from '../../../_variables/_variables'\r\n// import {deletedVideoAutoRemover} from \"../../../variables/ajaxRequestVariables\";\r\n\r\nconst VideoElement = props => {\r\n    let qualityLabel = useRef(null);\r\n    let durationLabel = useRef(null);\r\n    let viewLabel = useRef(null);\r\n    let element = useRef(null)\r\n    let videoElement = useRef(null)\r\n    let contextData = useContext(AppContext);\r\n    let path = '/post/' + props.state._id + '/' + props.state.title;\r\n\r\n    let [ state, setState ] = useState({\r\n        isHover: false,\r\n        isWatched: false,\r\n        extraClassName:''\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (props.viewType){\r\n            setState({\r\n                ...state,\r\n                extraClassName: props.viewType\r\n            })\r\n        }\r\n    }, [ props ]);\r\n\r\n    useEffect(() => {\r\n        hoverCleaner()\r\n    }, [ state.isHover ]);\r\n\r\n    useEffect(() => {\r\n        if (contextData.state.videoPreviewID !== props.state._id) {\r\n            setState({\r\n                ...state,\r\n                isHover: false\r\n            })\r\n        }\r\n    }, [ contextData.state.videoPreviewID ]);\r\n\r\n    let isHoverHandler = () => {\r\n        if (props.state.videoTrailerUrl) {\r\n            state.isHover ? setState({ ...state, isHover: false }) : setState({ ...state, isHover: true })\r\n        }\r\n\r\n    };\r\n\r\n    const hoverCleaner = () => {\r\n        if (props.state.videoTrailerUrl) {\r\n            if (state.isHover) {\r\n                qualityLabel.current.style.visibility = 'hidden';\r\n                durationLabel.current.style.visibility = 'hidden';\r\n                viewLabel.current.style.visibility = 'hidden';\r\n            } else {\r\n                qualityLabel.current.style.visibility = 'visible';\r\n                durationLabel.current.style.visibility = 'visible';\r\n                viewLabel.current.style.visibility = 'visible';\r\n            }\r\n        }\r\n    };\r\n\r\n    const ImageContent = () => {\r\n        let dataToRender = () => {\r\n            if (state.isHover  && props.state.videoTrailerUrl) {\r\n                return (\r\n                    <video ref={ videoElement } src={ props.state.videoTrailerUrl } autoPlay={ true } loop={ true }\r\n                           onMouseOut={ e => { isHoverHandler()} }\r\n                    />)\r\n\r\n            } else if (!state.isHover) {\r\n                return (<img src={ props.state.mainThumbnail } alt={ props.state.title } onError={ err => {\r\n                    // deletedVideoAutoRemover(props.state)\r\n                    console.log(props.state)\r\n                } } onMouseEnter={ () =>\r\n                    isHoverHandler()\r\n                }/>)\r\n            }\r\n        };\r\n        return dataToRender()\r\n    };\r\n\r\n\r\n    return (\r\n        < div ref={ element } className={'videoElementDiv ' + (props.viewType ? props.viewType:'standard') }>\r\n            <Link as={ `/${ props.state.title }` } href={ {\r\n                pathname: '/post',\r\n                query: {\r\n                    postTitle: props.state.title\r\n                }\r\n            } }>\r\n                <a>\r\n                    <div className='VideoElement' key={ props.state.title }>\r\n                        <div className=\"image\">\r\n                            <ImageContent/>\r\n                            <span ref={ qualityLabel } className='quality'>{ props.state.quality }</span>\r\n\r\n                            <span ref={ viewLabel } className='views'><FA className='fontawesomeSmall' name=\"eye\"/>{ props.state.views }</span>\r\n                            <span ref={ durationLabel } className='duration'>{ props.state.duration }</span>\r\n                        </div>\r\n                        <ProgressBar value={ likeValueCalculator(props.state.likes, props.state.disLikes) } percent={ true }/>\r\n                        <h3>{ props.state.title }</h3>\r\n                    </div>\r\n                </a>\r\n            </Link>\r\n\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default withRouter(VideoElement);"]},"metadata":{},"sourceType":"module"}