(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"891V":function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),r=n.n(a),s=n("rePB"),o=n("q1tI"),c=n.n(o),u=n("hItm"),i=n("0Bsm"),p=n.n(i),f=n("vDqi"),l=n.n(f),b=n("A8lN"),d=n("U+0P"),g=n("bSV5"),w=n("XpSs"),m=n("DEwD"),O=n.n(m),j=c.a.createElement;function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){var t=Object(o.useContext)(b.a),n=(Object(o.useRef)(null),Object(o.useState)({})),a=n[0],r=n[1],c=Object(o.useState)({response:void 0,type:void 0}),i=c[0],p=c[1],f=function(e){r(v({},a,Object(s.a)({},e.target.name,e.target.value)))};Object(o.useEffect)((function(){console.log(e)}),[]);return j(u.a,null,j(w.a,e),j("div",{className:"Login authPage"},j("form",{className:"authForm",onSubmit:function(n){return function(n){n.preventDefault(),l.a.post("/api/v1/users/login",a).then((function(e){"success"===e.data.type&&e.data.token&&localStorage.setItem("wt",e.data.token),p(v({},i,{response:e.data.response,type:e.data.type}))})).then((function(){t.functions.getAndSetUserInfo().then((function(){e.router.back()}))})).catch((function(e){return console.log(e)}))}(n)}},j("label",{className:"messageLabel"},i.response),j("div",{className:"authFormItem"},j("p",null,"username"),j("input",{name:"username",onChange:function(e){return f(e)}})),j("div",{className:"authFormItem"},j("p",null,"password"),j("input",{name:"password",type:"password",onChange:function(e){return f(e)}})),j("button",{className:"submitBtn",type:"submit"},"Login"))))};y.getInitialProps=function(e){var t,n,a,s,o,c;return r.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(!(t=e.req)){u.next=7;break}return u.next=4,r.a.awrap(Object(d.d)(t));case 4:u.t0=u.sent,u.next=8;break;case 7:u.t0="";case 8:return n=u.t0,u.next=11,r.a.awrap(Object(g.e)({settings:["identity","navigation","design"]},!0,n));case 11:return s=u.sent,u.next=14,r.a.awrap(Object(g.f)({widgets:["header"]},!0,n));case 14:return c=u.sent,o=c.data.widgets?c.data.widgets:[],a=s.data.settings?O()(s.data.settings).finalObject:[],u.abrupt("return",v({},a,{widgets:o}));case 18:case"end":return u.stop()}}))},t.default=p()(y)},WjV5:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return n("891V")}])}},[["WjV5",1,2,0,4,5,3]]]);