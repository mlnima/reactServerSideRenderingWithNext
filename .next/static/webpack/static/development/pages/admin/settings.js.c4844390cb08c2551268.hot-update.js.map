{"version":3,"file":"static/webpack/static\\development\\pages\\admin\\settings.js.c4844390cb08c2551268.hot-update.js","sources":["webpack:///./pages/admin/settings/index.js"],"sourcesContent":["import React, { useEffect, useState, useContext,useRef } from 'react';\r\nimport AdminLayout from \"../../../components/layouts/AdminLayout\";\r\nimport { updateSetting,getSetting } from \"../../../_variables/ajaxVariables\";\r\nimport FA from \"react-fontawesome\";\r\n\r\nconst settings = props => {\r\n    const keywordsInput = useRef(null)\r\n    const [ state, setState ] = useState({\r\n        title: '',\r\n        themeColor: '',\r\n        description: '',\r\n        keywords: []\r\n\r\n    });\r\n    useEffect(() => {\r\n\r\n        console.log(state)\r\n    }, [state]);\r\n\r\n\r\n    useEffect(()=>{\r\n     getSetting('identity').then(res=>{\r\n         if (res.data.setting){\r\n             setState({\r\n                 ...state,\r\n                 ...res.data.setting.data\r\n             })\r\n         }else {\r\n             setState({\r\n                 ...state,\r\n                 title: 'website title',\r\n                 themeColor: '#000',\r\n                 description: 'website description',\r\n                 Keywords: ['keywords']\r\n             })\r\n         }\r\n     })\r\n    },[ ]);\r\n\r\n    const onSubmitHandler = e => {\r\n        e.preventDefault()\r\n        updateSetting('identity', state)\r\n    };\r\n\r\n    const onChangeHandler = e => {\r\n        setState({\r\n            ...state,\r\n            [e.target.name]:e.target.value\r\n        })\r\n    }\r\n\r\n\r\n    const deleteItem = (e) => {\r\n        setState({\r\n            ...state,\r\n            keywords: state.keywords.filter(i=> {return i!== e.currentTarget.name}),\r\n        })\r\n    };\r\n    const addKeyword = () => {\r\n        if (keywordsInput.current.value.includes(',')) {\r\n            let newItems = keywordsInput.current.value.split(',');\r\n            setState(state => ({\r\n                ...state,\r\n                keywords: [ ...state.keywords, ...newItems ]\r\n            }))\r\n        } else {\r\n            setState({\r\n                ...state,\r\n                keywords:  [...state.keywords,keywordsInput.current.value]\r\n            })\r\n        }\r\n    };\r\n\r\n    const keywords = state.keywords.map(item => {\r\n        return (\r\n            <div key={ item }  className='item'>\r\n                <p>{ item }</p>\r\n                <button name={ item } onClick={ (e) => deleteItem(e) } ><FA className='fontawesomeMedium' name='times'/></button>\r\n            </div>\r\n        )\r\n    });\r\n\r\n    return (\r\n        <AdminLayout>\r\n            <form id='site-settings-form' onSubmit={ e => onSubmitHandler(e) }>\r\n                <div className=\"site-settings-form-section\">\r\n                    <p>Title</p>\r\n                    <input name='title' value={state.title} onChange={e=>onChangeHandler(e)}/>\r\n                </div>\r\n                <div className=\"site-settings-form-section\">\r\n                    <p>Theme Color</p>\r\n                    <input name='themeColor' value={state.themeColor}  onChange={e=>onChangeHandler(e)}/>\r\n                </div>\r\n\r\n                <div className=\"site-settings-form-section\">\r\n                    <p>Description</p>\r\n                    <input name='description' value={state.description} onChange={e=>onChangeHandler(e)}/>\r\n                </div>\r\n                <div className=\"site-settings-form-section\">\r\n                    <p>Keywords</p>\r\n                    <input ref={keywordsInput} name='keywords' value={state.keywords}/>\r\n                    <span>Separate tags with commas</span>\r\n                    <button type='button' onClick={()=>addKeyword()}>add</button>\r\n                    <div className=\"items\">\r\n                        {keywords}\r\n                    </div>\r\n                </div>\r\n                <button type='submit'>save settings</button>\r\n            </form>\r\n        </AdminLayout>\r\n    );\r\n};\r\n\r\nsettings.getInitialProps = async ({ pathname, query, req, res, err }) => {\r\n    return { name: 'test' }\r\n}\r\nexport default settings;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAGA;AACA;AACA;AACA;AAJA;AAFA;AAAA;AACA;AAQA;AAEA;AACA;AAGA;AACA;AACA;AACA;AAIA;AACA;AAEA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AAFA;AAAA;AAIA;AACA;AAEA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAEA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAIA;AAAA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;;;;A","sourceRoot":""}