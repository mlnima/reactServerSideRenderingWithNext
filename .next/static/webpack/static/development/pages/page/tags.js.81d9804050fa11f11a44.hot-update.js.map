{"version":3,"file":"static/webpack/static\\development\\pages\\page\\tags.js.81d9804050fa11f11a44.hot-update.js","sources":["webpack:///./pages/page/tags/index.js"],"sourcesContent":["import React, { useEffect, useState, useContext, useRef } from 'react';\r\nimport AppLayout from '../../../components/layouts/AppLayout'\r\nimport { getSetting, getWidgetsWithData } from '../../../_variables/ajaxVariables'\r\nimport { getMeta } from '../../../_variables/ajaxPostsVariables'\r\nimport { AppContext } from '../../../context/AppContext'\r\nimport TagElement from '../../../components/includes/TagElement/TagElement'\r\nimport CategoryElement from '../../../components/includes/CategoryElement/CategoryElement'\r\nimport PaginationComponent from '../../../components/includes/PaginationComponent/PaginationComponent'\r\nimport SiteSettingSetter from '../../../components/includes/SiteSettingsSetter/SiteSettingsSetter'\r\nimport withRouter from 'next/dist/client/with-router'\r\nimport SideBar from '../../../components/includes/Sidebar/Sidebar'\r\n\r\nconst tags = props => {\r\n\r\n    const [state,setState]=useState({\r\n        style:{}\r\n    })\r\n    useEffect(() => {\r\n        console.log( props)\r\n        if (props.identity.categoriesPagesSidebar){\r\n            setState({\r\n                style: {\r\n                    gridArea:'content'\r\n                }\r\n            })\r\n        }\r\n\r\n    }, [props]);\r\n\r\n    const renderTags = props.tagsSource.metas.map(meta => {\r\n            return (\r\n                <TagElement key={meta._id} imageUrl={meta.imageUrl} noImageUrl={meta.noImageUrl} name={meta.name} count={meta.count}/>\r\n            )\r\n    })\r\n\r\n    return (\r\n        <>\r\n        <AppLayout>\r\n            <SiteSettingSetter  { ...props }/>\r\n            <div style={state.style} className={ props.identity.categoriesPageSidebar ? 'content withSidebar':'content withOutSidebar'  } >\r\n                <div>\r\n                    <div className='tags'>\r\n                        {renderTags}\r\n                    </div>\r\n                    <PaginationComponent\r\n                        isActive={ true }\r\n                        currentPage={props.getTagsData.pageNo }\r\n                        totalCount={ props.tagsSource.totalCount }\r\n                        size={ props.getTagsData.size }\r\n                        maxPage={ Math.ceil(parseInt(props.tagsSource.totalCount) / parseInt(props.getTagsData.size))- 1 }\r\n                        queryData={props.query || props.router.query}\r\n                        pathnameData={props.pathname ||props.router.pathname }\r\n                    />\r\n                    {/*<SideBar isActive={props.identity.tagsPageSidebar} widgets={props.widgets} position='tagsPageSidebar'/>*/}\r\n                </div>\r\n\r\n            </div>\r\n        </AppLayout>\r\n            </>\r\n    );\r\n};\r\n\r\n\r\n\r\ntags.getInitialProps = async ({ pathname, query, req, res, err }) => {\r\n    let navigation;\r\n    let identity;\r\n    let tagsSource;\r\n    let widgets;\r\n    const widgetsData = await getWidgetsWithData('tagsPageSidebar')\r\n    const identityData = await getSetting('identity');\r\n    const navigationData = await getSetting('navigation');\r\n    identity = identityData.data.setting ? identityData.data.setting.data : {}\r\n    navigation = navigationData.data.setting ? navigationData.data.setting : {}\r\n\r\n    const getTagsData = {\r\n        type: 'tag',\r\n        searchForImageIn:'tags',\r\n        pageNo: parseInt(query.page) || 1,\r\n        size: parseInt(query.size) || parseInt(identity.tagsCountPerPage) ||30,\r\n        sort: query.sort || 'latest',\r\n\r\n    }\r\n\r\n\r\n        const tagsData = await getMeta(getTagsData)\r\n        tagsSource = tagsData.data ? tagsData.data : {tags:[],totalCount:0}\r\n         widgets = widgetsData.data.widgets ? widgetsData.data.widgets : []\r\n\r\n\r\n    return { identity, navigation, query, tagsSource,getTagsData,pathname,widgets }\r\n}\r\nexport default withRouter(tags);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AADA;AAFA;AAAA;AACA;AAIA;AACA;AACA;AAAA;AACA;AACA;AACA;AADA;AADA;AAKA;AAEA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AAIA;AAAA;AAAA;AAEA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAgBA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAKA;AALA;AAAA;AACA;AADA;AAMA;AANA;AAAA;AACA;AADA;AAOA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA;AAXA;AAAA;AACA;AADA;AAqBA;AACA;AAAA;AAAA;AAAA;AACA;AAvBA;AA0BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AA3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AA2BA;;;;A","sourceRoot":""}