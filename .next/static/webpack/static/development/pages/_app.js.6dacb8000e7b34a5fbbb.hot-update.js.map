{"version":3,"file":"static/webpack/static\\development\\pages\\_app.js.6dacb8000e7b34a5fbbb.hot-update.js","sources":["webpack:///./context/AppContext.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport jwtDecode from \"jwt-decode\";\r\nimport jwt from 'jsonwebtoken';\r\nimport axios from \"axios\";\r\n\r\nexport const AppContext = React.createContext();\r\n\r\nconst AppProvider = props => {\r\n\r\n    const [ state, dispatchState ] = useState({});\r\n    const [ settings, dispatchSettings ] = useState({\r\n        adminPanelSideBar: false,\r\n        test: false\r\n    });\r\n    const [ userData, dispatchUserData ] = useState({\r\n        username: undefined,test:1\r\n    });\r\n    const [ functions, dispatchFunctions ] = useState({\r\n        getAndSetUserInfo: async ()=>{\r\n            return await axios.post('/api/v1/users/getUserInfo', { token: localStorage.wt })\r\n        }\r\n    });\r\n\r\n    useEffect(()=>{\r\n        if (localStorage.wt){\r\n            functions.getAndSetUserInfo().then(res=>{\r\n                dispatchUserData({...userData,...res.data.userData});\r\n                console.log(res )\r\n            }).catch(err=>{\r\n                console.log( err);\r\n                localStorage.removeItem('wt')\r\n            })\r\n        }\r\n    },[ ]);\r\n\r\n\r\n    useEffect(()=>{\r\n        console.log( userData)\r\n    },[ userData]);\r\n\r\n\r\n    // useEffect(() => {\r\n    //     if (localStorage.wt) {\r\n    //         functions.getUserInfo().then(res => {\r\n    //             functions.setUserInfo(res)\r\n    //             state.functions.requestForGoingOnline();\r\n    //             props.history.push('/chat')\r\n    //         }).catch(() => {\r\n    //             localStorage.removeItem('wt');\r\n    //             if (props.location.pathname === '/chat' ){\r\n    //                 props.history.push('/')\r\n    //             }\r\n    //         })\r\n    //     }else {\r\n    //         if (props.location.pathname === '/chat' ){\r\n    //             props.history.push('/')\r\n    //         }\r\n    //     }\r\n    // }, [props.location.pathname]);\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <AppContext.Provider\r\n                value={ {\r\n                    state,\r\n                    dispatchState,\r\n                    settings,\r\n                    dispatchSettings,\r\n                    userData,\r\n                    dispatchUserData,\r\n                    functions\r\n                } }>\r\n\r\n                { props.children }\r\n            </AppContext.Provider>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const AppProviderWithRouter = AppProvider;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAIA;AACA;AAFA;AAHA;AAAA;AACA;AADA;AAQA;AAAA;AADA;AAPA;AAAA;AACA;AADA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAFA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAVA;AAAA;AACA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AADA;AAeA;AACA;AACA;;;;A","sourceRoot":""}